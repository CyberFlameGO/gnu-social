{% extends 'stdgrid.html.twig' %}
{% import '/cards/note/view.html.twig' as noteView %}

{% block title %}{% if page_title is defined %}{{ page_title | trans }}{% endif %}{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('assets/default_theme/css/pages/feeds.css') }}" type="text/css">
{% endblock stylesheets %}

{% block body %}
    <header class="feed-header">
        {% if page_title is defined %}
            <h1>{{ page_title | trans }}</h1>
        {% endif %}
        <nav class="feed-actions">
            {% for block in handle_event('AddFeedActions', app.request) %}
                {{ block | raw }}
            {% endfor %}
        </nav>
    </header>

    {# Backwards compatibility with hAtom 0.1 #}
    <main class="feed" tabindex="0" role="feed">
        <div class="h-feed hfeed notes">
            {% if notes is defined and notes is not empty %}
                {% for conversation in notes %}
                    {% block current_note %}
                        {% if conversation is instanceof('array') %}
                            {{ noteView.macro_note(conversation['note'], conversation['replies']) }}
                        {% else %}
                            {{ noteView.macro_note(conversation) }}
                        {% endif %}
                        <hr tabindex="0" title="{{ 'End of note and replies.' | trans }}">
                    {% endblock current_note %}
                {% endfor %}
            {% else %}
                <div id="empty-notes"><h1>{% trans %}No notes here.{% endtrans %}</h1></div>
            {% endif %}
        </div>
    </main>
{% endblock body %}
